



<!doctype html>
<html lang="fa" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="کپی کردن">
      
        <meta name="lang:clipboard.copied" content="کپی شد">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="False">
      
        <meta name="lang:search.pipeline.trimmer" content="False">
      
        <meta name="lang:search.result.none" content="سندی یافت نشد">
      
        <meta name="lang:search.result.one" content="1 سند یافت شد">
      
        <meta name="lang:search.result.other" content="# سند یافت شد">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>فصل پانزدهم - تفکر پایتونی</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="rtl">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        پرش به محتویات
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="تفکر پایتونی" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              تفکر پایتونی
            </span>
            <span class="md-header-nav__topic">
              
                فصل پانزدهم
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="جستجو" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            برای شروع جستجو تایپ کنید
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="تفکر پایتونی" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    تفکر پایتونی
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="مقدمه" class="md-nav__link">
      مقدمه
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-01/" title="فصل اول" class="md-nav__link">
      فصل اول
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-02/" title="فصل دوم" class="md-nav__link">
      فصل دوم
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-03/" title="فصل سه" class="md-nav__link">
      فصل سه
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-04/" title="فصل چهارم" class="md-nav__link">
      فصل چهارم
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-05/" title="فصل پنجم" class="md-nav__link">
      فصل پنجم
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-06/" title="فصل ششم" class="md-nav__link">
      فصل ششم
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-07/" title="فصل ۷" class="md-nav__link">
      فصل ۷
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-08/" title="فصل ۸" class="md-nav__link">
      فصل ۸
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-09/" title="فصل ۹" class="md-nav__link">
      فصل ۹
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-10/" title="فصل ۱۰" class="md-nav__link">
      فصل ۱۰
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-11/" title="فصل 11" class="md-nav__link">
      فصل 11
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-12/" title="فصل ۱۲" class="md-nav__link">
      فصل ۱۲
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-13/" title="فصل 13" class="md-nav__link">
      فصل 13
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-14/" title="فصل ۱۴" class="md-nav__link">
      فصل ۱۴
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        فصل پانزدهم
      </label>
    
    <a href="./" title="فصل پانزدهم" class="md-nav__link md-nav__link--active">
      فصل پانزدهم
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">فهرست موضوعات</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    کلاس ها و اشیاء
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-16/" title="فصل ۱۶" class="md-nav__link">
      فصل ۱۶
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-17/" title="فصل هفدهم" class="md-nav__link">
      فصل هفدهم
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-18/" title="فصل ۱۸ - ارث‌بری" class="md-nav__link">
      فصل ۱۸ - ارث‌بری
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../chapter-19/" title="فصل ۱۹" class="md-nav__link">
      فصل ۱۹
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">فهرست موضوعات</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    کلاس ها و اشیاء
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">فصل پانزدهم</h1>
<h2 id="_2">کلاس ها و اشیاء</h2>
<p>در حال حاضر شما می‌دانید که چطور از توابع برای سامان‌دهی کدها و انواع
توکار براس سامان‌دهی اطلاعات استفاده کنید.قدم بعدی یادگیری "برنامه‌نویسی
شی گرا"ست که از انواع از پیش تعیین شده توسط برنامه نویس برای سامان‌دهی
کد و اطلاعات استفاده می‌کند.برنامه نویسی شی گرا موضوع بسیار بزرگی‌ست که
ممکن است توضیح در مورد آن چند فصل به طول بیانجامد.</p>
<p>مثال‌های آموزشی در این فصل در {آدرسی } و راهنمای تمرین‌ها در ‫‫{آدرس} در
دسترس است.</p>
<p>۱۵.۱ انواع از پیش‌تعیین شده توسط برنامه‌نویس</p>
<p>ما در پایتون انواع توکار بسیاری داریم ، حالا ما می‌خواهیم که نوع جدیدی
از انواع را تعریف کنیم.به عنوان مثال ، ما نوع جدیدی به نام Point
می‌سازیم که معرفی‌کننده‌ی یک نقطه در یک فضای دو بعدی‌ست.</p>
<p>در نشانه‌ گذاری ریاضیاتی ، نقاط معمولاً در داخل پرانتز که با یک ویرگول
از هم جدا شده اند ، نمایان‌گر محختصات هستند.برای مثال ،(۰,۰)
نشان‌دهنده‌ی مبدا و (x,y) نمایان‌گر نقطه‌ی x از راست و y از بالا نسبت به
مبدا ، می‌باشد.</p>
<p>در پایتون چندین راه برای نمایش‌دادن نقاط در پایتون وجود دارد:</p>
<ul>
<li>می‌توان مختصات را با صورت جداگانه در دو متغیر x و y ذخیره کرد.</li>
<li>می‌توان مختصات را به صورت المانی در یک لیست یا لیست چندتایی ذخیره‌
    کرد .</li>
<li>می‌توان نوع جدیدی از نقاط به صورت اشیاء ساخت.</li>
</ul>
<p>ساخت یک نوع جدید پیچیده‌تر بقیه دیگر گزینه‌هاست ، ولی دارای مزیت‌هایی
هست که به زودی به آن خواهیم پرداخت.</p>
<p>یک نوع تعیین شده از کاربر یک کلاس نامیده‌ می‌شود.ظاهر یک کلاس به صورت
زیر است</p>
<p>class Point:</p>
<p>“””Represents a point in 2-D Space.”””</p>
<p>بخش بالا یک کلاس جدید به نام Point را نمایش می‌دهد.بدنه‌ی آن یک
Docstring است که توضیح می‌دهد که کلاس به چه کاری می‌آید.شما می‌توانید
متغیر‌ها و متدها را در درون کلاس تعریف کنید ، اما ما بعداً به آن
می‌پردازیم .</p>
<p>معرفی یک کلاس به نام Point که یک شیء از اشیا را می‌سازد.</p>
<p>&gt;&gt;&gt; Point</p>
<p>&lt;class ‘__main__.Point’&gt;</p>
<p>چون Point در بالاترین مرحله معرفی ‌شده ، "نام کامل" آن به صورت</p>
<p>__main__.Point</p>
<p>می‌باشد.</p>
<p>کلاس شی به منزله‌ی کارخانه‌ای برای ساخت اشیاء‌می‌باشد.برای ساخت یک نقطه
، می‌توان ، در صورتی که یک تابع باشد ، آن‌را صدا زد.</p>
<p>&gt;&gt;&gt; blank = Point()</p>
<p>&gt;&gt;&gt; blank</p>
<p>&lt;__main__.Point object at 0xb7e9d3ac&gt;</p>
<p>مقدار بازگشت داده شده ارجاعی به شیء در Point است که ما قبلاً آن را به
blank متصل کرده بودیم.</p>
<p>ساخت یک شیء جدید ، نمونه‌سازی و شیء یک نمونه‌ از کلاس نامیده می‌شود.</p>
<p>وقتی شما یک نمونه را چاپ می‌کنید،پایتون به شما می‌گوید که این نمونه به
کدام کلاس تعلق دارد و در کجای حافظه ذخیره شده است .</p>
<p>( وجود پیشوند 0x نمایان‌گر آن است که آن عدد به صورت هگزادسیمال است)</p>
<p>هر شی نمونه‌ای از برخی کلاس‌هاست ، پس "کلاس" و " نمونه" قابل تعویض
است.ولی در این فصل من از "نمونه" استفاده می‌کنم تا نشان دهم که در مورد
انواع از پیش تعیین شده‌ی برنامه نویس صحبت می‌کنم.</p>
<p>۱۵۰۲ خاصیت‌ها</p>
<p>می‌توان برای نمونه‌‌ها مقادیری را با نشانه‌گذاری نقطه در نظر گرفت:</p>
<p>&gt;&gt;&gt; blank.x = 3.0</p>
<p>&gt;&gt;&gt; blank.y = 4.0</p>
<p>این نحو شباهت بسیاری به نحو انتخاب یک متغیر از ماژول ، مانند انتخاب
math.pi ، یا string.whitespace.</p>
<p>در اینجا ما برای المان‌های یک شی را برای نام‌گذاری ، مقادیری را در نظر
می‌گیریم..</p>
<p>به عنوان یک اسم "AT-trib-ute" با تمرکز بر بخش اول کلمه تلفظ می‌شود ، که
مخالف تلفظ "a-TRIB-ute" به عنوان یک فعل است .</p>
<p>دیاگرام ذیل نتیجه‌ی این واگذاری را نشان می‌دهد.دیاگرام حالت</p>
<p>متغیر blank به یکی از شی‌های Point اشاره می‌کند که هرکدام شامل دو خاصیت
است.هر خاصیت به یک عدد با خاصیت شناور اشاره می‌کند.</p>
<p>شما می‌توانید مقدار یک خاصیت را با نحو مشابهی بخوانید:</p>
<p>&gt;&gt;&gt;blank,y</p>
<p>4.0</p>
<p>&gt;&gt;&gt;x = blank.x</p>
<p>&gt;&gt;&gt;x</p>
<p>3.0</p>
<p>عبارت blank.x به این معناست که "برو به شی blank و مقدار x را بگو" .به
عنوان مثال ما مقدار یک متغیر به اسم x را در نظر میگیریم.هیچ تداخلی بین
متغیر x و خاصیت x وجود ندارد</p>
<p>شما می‌توانید از نشانه گذاری نقطه به عنوان بخشی از اصطلاح استفاده کنید:</p>
<p>&gt;&gt;&gt; '(%g, %g)’ % (blank.x,blank.y)</p>
<p>‘(3.0, 4.0)’</p>
<p>&gt;&gt;&gt; distance = math.sqrt(blank.x**2 + blank.y**2)</p>
<p>&gt;&gt;&gt; distance</p>
<p>5.0</p>
<p>همچنین می‌توان به از نمونه به عنوان آرگومان استفاده کرد .مثلاً:</p>
<p>def print_point(p):</p>
<p>print(‘(%g, %g)’ % (p.x, p.y))</p>
<p>عبارت print_point ، Point را به عنوان آرگومان گرفته و به عنوان
نشانه‌گذاری ریاضی نمایش می‌دهد.برای فراخوانی آن می‌توان blank را به
عنوان یک آرگومان در نظر گرفت :</p>
<p>&gt;&gt;&gt; print_point (blank)</p>
<p>(3.0, 4.0)</p>
<p>درون تابع ، p یک نام مستعار برای blank است که اگر p تغییر پیدا کند ،
blank نیز تغییر می‌کند.</p>
<p>برای تمرین یک تابع با نام distance_between_points بنییسید که دو نقطه
به عنوان آرگومان دریافت کند و فاصله‌ی بین آن‌ها را نمایش دهد.</p>
<p>۱۵.۳ مستطیل</p>
<p>بعضی وقت‌ها این واضح است که خاصیت‌های یک شی چطور باید باشد ولی بعضی
مواقع دیگر خود شما باید تصمیم بگیرید.برای مقال ،‌تصور کنید که شما در حال
طراحی یک کلاس هستید که یک مستطیل را معرفی کند.کدام خاصیت را باید استفاده
کنیم که مکان و ساز مستطیل را در نظر بگیرد ؟ شما می‌توانید زوایا را در
نظر نگیرید . برای یاده نگه‌داشتن اجزا می‌توان فرض کرد که مستطیل هم
عمودی‌ست و هم افقی .</p>
<p>در اینجا حداقل دو احتمال وجود دارد.</p>
<ul>
<li>می‌توان یک گوشه ، ارتفاع و عرض مستطیل را مشخص کرد</li>
<li>می‌توان دو گوشه‌ی مخالف هم را در نظر گرفت</li>
</ul>
<p>در اینجا سخت است که چه چیزی از دیگری بهتر است ، پس ما اولی را پیاده سازی
می‌کنیم.برای مثال :</p>
<p>ما در اینجا یک کلاس را معرفی می‌کنیم :</p>
<p>شکل ۲-۱۵ دیاگرام شی</p>
<p>class Rectangle:</p>
<p>””” Represents a rectangle.</p>
<p>attributes : witdth, height, corner.</p>
<p>”””</p>
<p>docstring خصوصیات را لیست میکند :width و height عدد هستند و corner یک شی
نقطه است که نقطه ی پایین سمت چپ را مشخص میکند.</p>
<p>برای نشان دادن یک مستطیل ، شما باید یک شی مستطیل ایجاد کنید و مقادیر
ویژگی های شی مستطیل که ایجاد کرده اید را به شی اختصاص بدهید:</p>
<p>box = Rectangle ()</p>
<p>box.width = 100.0</p>
<p>box.height = 200.0</p>
<p>box.corner = Point ()</p>
<p>box.corner.x = 0.0</p>
<p>box.corner.y = 0.0</p>
<p>عبارت box.corner.x به این معنی است که "به شی ای که box به آن اشاره می
کند برو و خاصیت corner را انتخاب کن ، حال به آن شی (corner) مراجعه کن و
خاصیت x را انتخاب کن"</p>
<p>شکل ۲-۱۵ وضعیت شی را نشان می دهد. شی ای که خاصیت شی دیگری باشد ، درونی
سازی شده <a href="embedded">^1</a>است.</p>
<p>۱۵-۴ نمونه‌ها به عنوان مقدار</p>
<p>تابع‌ها می‌توانند نمونه بگردانند. برای مثال find_tracker یک چهارضلعی
Rectangle می‌گیرد و یک نقطه Point برمی‌گرداند که مختصات مرکز چهارضلعی را
در بردارد.</p>
<p>def find_center(rect):</p>
<p>p = Point()</p>
<p>p.x = rect.corner.x + rect.width/2</p>
<p>p.y = rec</p>
<p>return p</p>
<p>مثال زیر یک جعبه را به عنوان متغیر دریافت می‌کند و نقطه به دست آمده را
در متغیر مرکز center ذخیره می‌کند.</p>
<p>&gt;&gt;&gt; center = find_center(box)</p>
<p>&gt;&gt;&gt; print_point(center)</p>
<p>(50, 100)</p>
<p>۱۵-۵ شیئ‌ها تغییرناپذیرند</p>
<p>می‌توانید وضعیت یک شیئ را با تخصیص دادن یک مقدار به یکی از مشخصه‌هایش
تغییر دهید. برای مثال برای اینکه اندازه مستطیل را بدون تغییر مکانش،
می‌توانید مقدار طول width و عرض height را تغییر دهید:</p>
<p>box.width = box.width + 50</p>
<p>box.height = box.height + 100</p>
<p>شما هم‌چنین می‌توانید تابع‌هایی بنویسید که شیئ‌ها را تغییر می‌دهند. برای
مثال grow_rectangle یک شیئ چهارضلعی و دو مقدار، dwidth و dheight را
بگیرید و مقدارها را به طول و عرض مستطیل اضافه کند:</p>
<p>def grow_rectangle(rect, dwidth, dheight):</p>
<p>rect.width += dwidth</p>
<p>rect.height += dheight</p>
<p>مثال زیر اثر آن را نمایش می‌دهد:</p>
<p>&gt;&gt;&gt; box.width, box.height</p>
<p>(150.0, 300.0)</p>
<p>&gt;&gt;&gt; grow_rectangle(box, 50, 100)</p>
<p>&gt;&gt;&gt; box.width, box.height</p>
<p>(200.0, 400.0)</p>
<p>درون تابع rect یک نام مستعار برای box است، بنابراین وقتی تابع rect را
تغییر می‌دهد، جعبه تغییر می‌کند.</p>
<p>به عنوان تمرین یک تابع به نام move_rectangle که یک چهارضلعی و دو مقدار
به نام dx و dy را می‌گیرد. این تابع باید مکان چهارضلعی را با اضافه کردن
dx به مختصات x گوشه و اضافه کردن dy به مختصات y گوشه تغییر دهد.</p>
<p>۱۵-۶ کپی کردن</p>
<p>استفاده از نام مستعار باعث می‌شود خواندن برنامه سخت شود زیرا تغییرات در
یک جا ممکن است اثرهای غیرمنتظره‌ای در جایی دیگر داشته باشد. مشکل بتوان
حواسمان به تمام متغیرهایی باشد که ممکن است به یک شیئ مشخص اشاره کنند.</p>
<p>کپی کردن یک شیئ غالباً بدیلی برای مستعارسازی است. ماژول copy تابعی به
نام copy دارد که می‌تواند هر شیئی را تکثیر کند:</p>
<p>&gt;&gt;&gt; p1 = Point()</p>
<p>&gt;&gt;&gt; p1.x = 3.0</p>
<p>&gt;&gt;&gt; p1.y = 4.0</p>
<p>&gt;&gt;&gt; import copy</p>
<p>&gt;&gt;&gt; p2 = copy.copy(p1)</p>
<p>شیئ‌های p1 و p2 دربردارنده داده یکسانی هستند، اما آن‌ها دو نقطه یکسان
نیستند.</p>
<p>&gt;&gt;&gt; print_point(p1)</p>
<p>(3, 4)</p>
<p>&gt;&gt;&gt; print_point(p2)</p>
<p>(3, 4)</p>
<p>&gt;&gt;&gt; p1 is p2</p>
<p>False</p>
<p>شکل ۱۵-۳</p>
<p>&gt;&gt;&gt; p1 == p2</p>
<p>False</p>
<p>عملگر is اعلام می‌کند که p1 و p2 دو شیئ یکسان نیستند که همان چیزی است که
انتظار داشتیم. اما شاید انتظار داشتید که == مقدار True برگرداند زیرا این
دو نقطه مقدار یکسانی دربردارند. در این صورت دلسرد می‌شوید اگر بدانید که
رفتار پیش‌فرض عملگر == در مورد نمونه‌ها مشابه عملگر is است؛ این عملگر
تشابه شیئ‌ها را بررسی می‌کند و نه برابری آن‌ها را. این به این دلیل است
که پایتون نمی‌داند در مورد تایپ‌های تعریف شده توسط برنامه‌نویس چه چیزی
باید برابری به حساب آید. حداقل فعلاً نمی‌داند.</p>
<p>اگر از copy.copy برای تکثیر یک چهارضلعی استفاده کنید، متوجه خواهید شد که
شیئ چهارضلعی را کپی می‌کند ولی نقطه جاسازی‌شده در آن را خیر.</p>
<p>&gt;&gt;&gt; box2 = copy.copy(box)</p>
<p>&gt;&gt;&gt; box2 is box</p>
<p>False</p>
<p>&gt;&gt;&gt; box2.corner is box.corner</p>
<p>True</p>
<p>در شکل ۱۵-۳ می‌توانید ببینید نمودار شیئ چه شکلی دارد. به این عمل کپی
سطحی می‌گوییم زیرا شیئ و هر ارجاعی که دربردارد را کپی می‌کند، ولی
شیئ‌های جاسازی‌شده در آن را خیر.</p>
<p>بیشتر اوقات این رفتاری نیست که مطلوبتان باشد. در این مثال فراخوانی
grow_rectangle روی یکی از چهارضلعی‌ها بر دیگری تاثیری نخواهد داشت ولی
فراخوانی move_rectangle روی هر کدام از آن‌ها بر هر دو اثر خواهد گذاشت!
این رفتار سردرگم‌کننده و مستعد خطا است.</p>
<p>خوشبختانه ماژول کپی یک متد به نام deepcopy دارد که نه تنها شیئ را، بلکه
شیئ‌هایی که به آن‌ها ارجاع می‌دهد، و شیئ‌هایی که <em>آن‌ها </em>به آن ارجاع
می‌دهند و علی آخر کپی می‌کند. تعجب نخواهید کرد اگر بدانید به این عمل کپی
عمیق می‌گویند.</p>
<p>&gt;&gt;&gt; box3 = copy.deepcopy(box)</p>
<p>&gt;&gt;&gt; box3 is box</p>
<p>False</p>
<p>&gt;&gt;&gt; box3.corner is box.corner</p>
<p>False</p>
<p>شیئ‌های box3 و box دو شیئ کاملا مجزا هستند.</p>
<p>به عنوان تمرین، نسخه‌ای از move_rectangle بنویسید که یک چهارضلعی جدید
را ایجاد می‌کند و برمی‌گرداند به جای این‌که نمونه قدیمی را تغییر دهد.</p>
<p>۱۵-۷ رفع اشکال</p>
<p>زمانی که با شیئ‌ها شروع به کار می‌کنید، ممکن است به چند استثنای جدید
برخورد کنید. اگر سعی کنید به مشخصه‌ای دسترسی پیدا کنید که وجود ندارد، به
AttributeError بر خواهید خورد:</p>
<p>&gt;&gt;&gt; p = Point()</p>
<p>&gt;&gt;&gt; p.x = 3</p>
<p>&gt;&gt;&gt; p.y = 4</p>
<p>&gt;&gt;&gt; p.z</p>
<p>AttributeError: Point instance has no attribute 'z'</p>
<p>اگر در مورد تایپ یک شیئ شک دارید، می‌توانید بپرسید:</p>
<p>&gt;&gt;&gt; type(p)</p>
<p>&lt;class '__main__.Point'&gt;</p>
<p>همچنین می‌توانید از isinstance برای این‌که چک کنید آیا یک شیئ نمونه‌ای
از یک کلاس هست استفاده کنید:</p>
<p>&gt;&gt;&gt; isinstance(p, Point)</p>
<p>True</p>
<p>اگر مطمئن نیستید آیا یک شیئ یک مشخصه خاص را دارد، می‌توانید از تابع
درونی hasattr استفاده کنید:</p>
<p>&gt;&gt;&gt; hasattr(p, 'x')</p>
<p>True</p>
<p>&gt;&gt;&gt; hasattr(p, 'z')</p>
<p>False</p>
<p>آرگومان اول می‌تواند هر شیئی باشد، آرگومان دوم یک <em>رشته </em>است که نام
مشخصه را دربردارد.</p>
<p>همچنین برای این‌که ببینید آیا یک شیئ مشخصه‌هایی که نیاز دارید را
دربردارد، می‌توانید از عبارت try استفاده کنید:</p>
<p>try:</p>
<p>x = p.x</p>
<p>except AttributeError:</p>
<p>x = 0</p>
<p>این رویکرد می‌تواند نوشتن تابع‌هایی که با تایپ‌های مختلف کار می‌کنند را
ساده‌تر کند؛ در قسمت ۱۷-۹ در این مورد بیشتر صحبت خواهیم کرد.</p>
<p>۱۵-۸ واژه‌نامه</p>
<p>کلاس یک تایپ تعریف شده توسط برنامه‌نویس. تعریف کلاس یک شیئ کلاس جدید
می‌سازد.</p>
<p>شیئ کلاس یک شیئ که اطلاعاتی در مورد تایپ تعریف‌شده توسط برنامه‌نویس را
دربردارد. شیئ کلاس می‌تواند برای ساختن نمونه‌هایی از این تایپ به کار
رود.</p>
<p>نمونه یک شیئ که به یک کلاس تعلق دارد.</p>
<p>نمونه‌سازی ساختن یک شیئ جدید.</p>
<p>مشخصه یکی از مقدارهای نام‌گذاری شده که به یک شیئ مربوط است.</p>
<p>شیئ جاگذاری‌شده یک شیئ که به عنوان مشخصه یک شیئ دیگر ذخیره شده است.</p>
<p>کپی سطحی کپی کردن محتویات یک شیئ شامل هر ارجاعی به شیئ‌های جاگذاری‌شده
که توسط تابع copy در ماژول copy اجرا می‌شود.</p>
<p>کپی عمیق کپی کردن محتویات یک شیئ به علاوه هر شیئ جاگذاری‌شده و هر شیئی
که درون آن‌ها جاگذاری شده و علی آخر که توسط تابع deepcopy در ماژول copy
اجرا می‌شود.</p>
<p>نمودار شیئ یک نمودار که شیئ‌ها، مشخصه‌های آن‌ها، و مقدارهای مشخصه‌ها را
نمایش می‌دهد.</p>
<p>۱۵-۹ تمرین‌ها</p>
<p>تمرین ۱۵-۱ کلاسی را تعریف کنید به نام Circle با مشخصه‌های center و
radius، که در آن center یک شیئ نقطه است و radius یک عدد است.</p>
<p>یک شیئ دایره نمونه‌سازی کنید که یک دایره با مرکز (۱۰۰، ۱۵۰) و شعاع ۷۵ را
نمایش می‌دهد.</p>
<p>تابعی به نام point_in_circle تعریف کنید که یک دایره و یک نقطه را
می‌گیرد و اگر نقطه داخل یا روی مرزهای دایره است، مقدار True برمی‌گرداند.</p>
<p>تابعی به نام rect_in_circle تعریف کنید که یک دایره و یک چهارضلعی را
می‌گیرد و اگر چهارضلعی کاملا داخل یا روی مرزهای دایره است، مقدار True
برمی‌گرداند.</p>
<p>تابعی به نام rect_circle_overlap تعریف کنید که یک دایره و یک چهارضلعی
را می‌گیرد و اگر هر کدام از گوشه‌های چهارضلعی درون دایره قرار بگیرد،
مقدار True برمی‌گرداند. یا برای نسخه چالش‌برانگیزتر، مقدار True برگرداند
اگر هر قسمتی از چهارضلعی درون دایره قرار بگیرد.</p>
<p>راه‌حل: http: // thinkpython2. com/ code/ Circle. py</p>
<p>تمرین ۱۵-۲ یک تابع به نام draw_rect بنویسید که یک شیئ لاک‌پشت و یک
چهارضلعی می‌گیرد و از لاک‌پشت برای رسم چهارضلعی استفاده کند. برای
نمونه‌هایی از کاربرد شیئ لاک‌پشت به فصل ۴ رجوع کنید.</p>
<p>یک تابع به نام draw_circle بنویسید که یک شیئ لاک‌پشت و یک دایره می‌گیرد
و دایره را رسم می‌کند.</p>
<p>راه‌حل: http: // thinkpython2. com/ code/ draw. py</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../chapter-14/" title="فصل ۱۴" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  قبلی
                </span>
                فصل ۱۴
              </span>
            </div>
          </a>
        
        
          <a href="../chapter-16/" title="فصل ۱۶" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  بعدی
                </span>
                فصل ۱۶
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>